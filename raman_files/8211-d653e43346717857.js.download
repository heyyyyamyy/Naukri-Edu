"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8211],{86742:function(e,s,i){var n=i(85893),o=i(5121),t=i(57420),l=i(74200),a=i(80433),d=i(13718),c=i(36467),r=i(13025),m=i(43852),u=i(5987),p=i(4171),h=i(57106),g=i(72761),x=i(20007),k=i(64317),j=i(90243),f=i(25675),b=i.n(f),_=i(67294),v=i(54867),N=i(99893),T=i(39834),C=i(26541),Z=i(71114),w=i(14121),y=i.n(w);let P={},E=(0,_.memo)(function(e){let{url:s,width:i,height:o,sizes:t}=e,[l,a]=(0,_.useState)(!1);return(0,n.jsx)(b(),{src:s,alt:"",width:i,className:l||P[s]?y().im_loaded:y().im,height:o,onLoad:function(){P[s]=!0,a(!0)},unoptimized:i<1024&&o<1024,sizes:t,loader:C.P})});s.Z=function(e){let{image:s,onCopyParams:i,onCopyImage:f,onSelect:b,onDelete:C,onUpscale:w,onEnhanceFace:P,onCopySeed:L,onCopyPrompt:I,onUpdate:S,actions:z=["like","delete","upscale","enhance_faces","copy_params","copy_image"],imageLoader:U,hoverable:O=!0,sizes:W}=e,[R,A]=(0,_.useState)(0),[D,M]=(0,_.useState)(!1);async function F(){s.liked||N.ZP.capture("Like Image",{model:s.modelTask.model}),S&&S(s.id,{liked:!s.liked}),await o.Z.post("/api/images/".concat(s.id,"/like"))}return((0,_.useEffect)(()=>{A(0)},[]),(0,_.useEffect)(()=>{s.loading&&setTimeout(()=>{A(R+.01)},10)},[s.loading,R]),s.loading)?(0,n.jsx)("div",{className:y().image,style:{paddingBottom:s.height/s.width*100+"%"},children:(0,n.jsx)("div",{className:y().loading,children:(0,n.jsx)(v.Z,{text:"".concat((Math.round(100*R)/100).toFixed(2),"s")})})}):(0,n.jsx)("div",{className:y().image,onMouseLeave:()=>M(!1),children:(0,n.jsxs)("div",{className:[y().img].join(" ").trim(),children:[(0,n.jsx)(E,{url:s.jpegUrl||s.url,width:s.width,height:s.height,sizes:W}),(0,n.jsx)("div",{className:[y().img_hover,O?y().hoverable:""].join(" ").trim(),onClick:()=>!D&&b&&b(s),style:{opacity:D?1:0,pointerEvents:D?"none":void 0},children:(0,n.jsxs)("div",{className:y().img_hover_row,children:[(0,n.jsxs)("div",{className:y().btn_group,children:[z.includes("like")?(0,n.jsx)("button",{onClick:e=>{e.stopPropagation(),F()},className:y().btn,children:(0,n.jsx)(t.Z,{strokeWidth:1.5,fill:s.liked?"rgb(252, 8, 120)":"none",stroke:s.liked?"rgb(252, 8, 120)":"white"})}):null,(s.modelTask.model.includes("stable-diffusion")||s.modelTask.model.includes("model-")||s.modelTask.model.includes("getimg-pipeline")||"instruct-pix2pix"===s.modelTask.model||"image-mixer"===s.modelTask.model)&&z.includes("copy_params")&&i?(0,n.jsx)(Z.Z,{text:"Generate\xa0similar",type:"button",children:(0,n.jsx)("button",{onClick:e=>{e.stopPropagation(),i(s)},className:y().btn,children:(0,n.jsx)(l.Z,{strokeWidth:1.5})})}):null,(s.modelTask.model.includes("stable-diffusion")||s.modelTask.model.includes("model-")||s.modelTask.model.includes("getimg-pipeline")||"instruct-pix2pix"===s.modelTask.model||"image-mixer"===s.modelTask.model)&&z.includes("copy_image")&&f?(0,n.jsx)(Z.Z,{text:"Use\xa0as\xa0init\xa0image",type:"button",children:(0,n.jsx)("button",{onClick:e=>{e.stopPropagation(),f(s)},className:y().btn,children:(0,n.jsx)(a.Z,{strokeWidth:1.5})})}):null,z.includes("delete")&&C?(0,n.jsx)("button",{className:y().btn,onClick:e=>{e.stopPropagation(),C(s),M(!1)},children:(0,n.jsx)(d.Z,{strokeWidth:1.5})}):null]}),(0,n.jsx)("div",{children:(0,n.jsxs)(T.default,{onOutsideClick:e=>{M(!1)},children:[(0,n.jsx)("button",{onClick:e=>{e.stopPropagation(),M(e=>!e)},className:y().btn,children:(0,n.jsx)(c.Z,{strokeWidth:1.5})}),D?(0,n.jsxs)("div",{className:y().actions,children:[(0,n.jsxs)("a",{className:y().actions_btn,href:"".concat(s.jpegUrl||s.url,"?response-content-disposition=attachment"),download:"getimg_ai_".concat(s.id,".").concat(s.format.toLowerCase()),onClick:e=>{e.stopPropagation(),N.ZP.capture("Download Image",{format:s.format}),M(!1)},children:[(0,n.jsx)(r.Z,{}),"Download"]}),(s.modelTask.model.includes("stable-diffusion")||s.modelTask.model.includes("model-")||s.modelTask.model.includes("getimg-pipeline")||"instruct-pix2pix"===s.modelTask.model||"image-mixer"===s.modelTask.model)&&z.includes("copy_params")&&i?(0,n.jsxs)("button",{onClick:e=>{e.stopPropagation(),i(s),M(!1)},className:y().actions_btn,children:[(0,n.jsx)(l.Z,{}),"Generate similiar"]}):null,(s.modelTask.model.includes("stable-diffusion")||s.modelTask.model.includes("model-")||s.modelTask.model.includes("getimg-pipeline")||"instruct-pix2pix"===s.modelTask.model||"image-mixer"===s.modelTask.model)&&z.includes("copy_image")&&f?(0,n.jsxs)("button",{onClick:e=>{e.stopPropagation(),f(s),M(!1)},className:y().actions_btn,children:[(0,n.jsx)(a.Z,{}),"Use as init image"]}):null,s.modelTask&&s.modelTask.params&&s.modelTask.params.prompt&&I?(0,n.jsxs)("button",{onClick:e=>{e.stopPropagation(),I(s.modelTask.params.prompt),M(!1)},className:y().actions_btn,children:[(0,n.jsx)(m.Z,{}),"Reuse prompt"]}):null,s.modelTask&&s.modelTask.params&&s.modelTask.params.seed&&L?(0,n.jsxs)("button",{onClick:e=>{e.stopPropagation(),L((s.modelTask.params.seed||0).toString()),M(!1)},className:y().actions_btn,children:[(0,n.jsx)(u.Z,{}),"Reuse seed"]}):null,(0,n.jsxs)("a",{className:y().actions_btn,href:"/image-to-video?img=".concat(s.id),onClick:e=>{e.stopPropagation(),M(!1)},target:"_blank",rel:"noreferrer",children:[(0,n.jsx)(p.Z,{}),"Open in Image to Video"]}),(0,n.jsxs)("a",{className:y().actions_btn,href:"/image-editor?img=https://getimg.ai/api/download/".concat(s.id),onClick:e=>{e.stopPropagation(),M(!1)},target:"_blank",rel:"noreferrer",children:[(0,n.jsx)(h.Z,{}),"Open in Image Editor"]}),(0,n.jsxs)("a",{className:y().actions_btn,href:"/editor/new?img=https://getimg.ai/api/download/".concat(s.id),onClick:e=>{e.stopPropagation(),M(!1)},target:"_blank",rel:"noreferrer",children:[(0,n.jsx)(g.Z,{}),"Open in AI Canvas"]}),s.width<2048&&s.height<2048&&z.includes("enhance_faces")&&P&&!s.modelTask.model.includes("getimg-pipeline")?(0,n.jsxs)("button",{className:y().actions_btn,onClick:e=>{e.stopPropagation(),P(s),M(!1)},children:[(0,n.jsx)(x.Z,{}),"Face Resoration"]}):null,s.width<2048&&s.height<2048&&z.includes("upscale")&&w?(0,n.jsxs)("button",{className:y().actions_btn,onClick:e=>{e.stopPropagation(),w(s),M(!1)},children:[(0,n.jsx)(k.Z,{}),"Upscale x4"]}):null,(0,n.jsxs)("button",{className:y().actions_btn,onClick:e=>{M(!1),b&&b(s)},children:[(0,n.jsx)(j.Z,{}),"View details"]}),z.includes("delete")&&C?(0,n.jsxs)("button",{className:y().actions_btn,onClick:e=>{e.stopPropagation(),C(s),M(!1)},children:[(0,n.jsx)(d.Z,{}),"Delete"]}):null]}):null]})})]})})]})})}},82051:function(e,s,i){i.d(s,{C:function(){return u}});var n=i(85893),o=i(41352),t=i(53219),l=i(82701),a=i(67294),d=i(39834),c=i(14121),r=i.n(c),m=i(61806);function u(e){let{image:s,list:i,onChange:c,onUpdate:u,onClose:p,hasMore:h,fetchMore:g}=e,[x,k]=(0,a.useState)(null),[j,f]=(0,a.useState)(null);function b(){if(!s)return;let e=i.findIndex(e=>e.id===s.id)+1;e<i.length&&c(i[e]),e>.7*i.length&&h&&g&&g()}function _(){if(!s)return;let e=i.findIndex(e=>e.id===s.id)-1;e>-1&&c(i[e])}if((0,a.useEffect)(()=>(s?document.body.classList.add("noscroll"):document.body.classList.remove("noscroll"),()=>{document.body.classList.remove("noscroll")}),[s]),(0,a.useEffect)(()=>{function e(e){s&&"ArrowRight"===e.key&&b(),s&&"ArrowLeft"===e.key&&_(),s&&"Escape"===e.key&&p()}return window.addEventListener("keydown",e),()=>{window.removeEventListener("keydown",e)}},[s,i,h]),!s||!s.id)return null;let v=i.findIndex(e=>e.id===s.id)>0,N=i.findIndex(e=>e.id===s.id)<i.length-1;return(0,n.jsxs)("div",{className:r()._overlay,onTouchStart:function(e){f(null),k(e.targetTouches[0].clientX)},onTouchMove:function(e){f(e.targetTouches[0].clientX)},onTouchEnd:function(e){if(!x||!j)return;let s=x-j;s>50&&b(),s<-50&&_()},children:[(0,n.jsx)("div",{className:r().overlay}),(0,n.jsx)("div",{className:r()._modal,children:(0,n.jsxs)("div",{className:r().modal,children:[(0,n.jsx)("button",{className:r().close,onClick:p,children:(0,n.jsx)(o.Z,{size:14})}),(0,n.jsxs)(d.default,{onOutsideClick:p,display:"contents",children:[(0,n.jsx)("button",{className:[r().nav_btn,v?"":r().nav_hidden].join(" "),onClick:_,children:(0,n.jsx)(t.Z,{size:16})}),(0,n.jsx)("div",{className:r().modal_image,children:(0,n.jsx)(m.Z,{...s,onUpdate:u},s.id)}),(0,n.jsx)("button",{className:[r().nav_btn,N?"":r().nav_hidden].join(" "),onClick:b,children:(0,n.jsx)(l.Z,{size:16})})]})]})})]})}}}]);